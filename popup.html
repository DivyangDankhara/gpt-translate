<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>GPT Translate</title>
  <style>
    body { font-family: system-ui, sans-serif; padding: 12px; width: 300px; }
    label { display:block; margin: 8px 0 4px; }
    button, select, input { width: 100%; padding: 8px; }
    .row { display:flex; gap:8px; }
    .row > * { flex:1; }
    .hint { color:#666; font-size: 12px; }
    .hidden { display:none; }
    .success { color: #0a7a36; font-size: 12px; }
  </style>
</head>
<body>
  <h3>GPT Translate</h3>

  <!-- Onboarding (shows if no API key saved) -->
  <div id="onboarding" class="hidden">
    <p>Sign in to your OpenAI account and create a secret key. Paste it below to enable GPT Translate.</p>
    <div class="row">
      <button id="openKeys">Open OpenAI Keys Page</button>
    </div>
    <label for="apiKey">OpenAI API Key</label>
    <input id="apiKey" type="password" placeholder="sk-..." />
    <div class="row" style="margin-top:8px">
      <button id="saveKey">Save Key</button>
    </div>
    <p class="hint">We cannot fetch keys automatically from ChatGPT for security reasons. Your key stays in local storage.</p>
    <p id="savedMsg" class="success hidden">Saved! You can now use GPT Translate.</p>
    <hr/>
  </div>

  <!-- Main controls (shows when key is present) -->
  <div id="mainControls" class="hidden">
    <div class="row">
      <button id="toggle">Toggle on/off</button>
      <button id="apply">Translate now</button>
    </div>
    <label for="lang">Target language</label>
    <select id="lang">
      <option>English</option>
      <option>French</option>
      <option>Spanish</option>
      <option>German</option>
      <option>Hindi</option>
      <option>Arabic</option>
      <option>Portuguese</option>
      <option>Russian</option>
      <option>Japanese</option>
      <option>Korean</option>
      <option>Chinese (Simplified)</option>
    </select>
    <label for="model">Model</label>
    <input id="model" placeholder="gpt-4o-mini" />
    <p class="hint">Tip: Use a fast/cheap model for big pages.</p>
  </div>

  <script src="popup.js"></script>
</body>
</html>
